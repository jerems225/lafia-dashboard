{% if companies %}
<div class="nav-align-top mb-4">
  <ul class="nav nav-pills mb-3 nav-fill" role="tablist">
    <li class="nav-item">
      <a class="nav-link mb-0 px-0 py-1 active" role="tab" data-bs-toggle="tab" data-bs-target="#request-rejected" aria-controls="request-rejected" aria-selected="false">
        <i class="tf-icons fa fa-question text-danger"></i>
        Demandes d'adhésion annulée
        <span class="badge rounded-pill badge-center bg-gradient-danger">{{companies.rejected|length}}</span>
      </a>
    </li>

    <li class="nav-item">
      <a class="nav-link mb-0 px-0 py-1" role="tab" data-bs-toggle="tab" data-bs-target="#activated" aria-controls="activated" aria-selected="false">
        <i class="tf-icons bx bx-home"></i>
        Entreprises actives
        <span class="badge rounded-pill badge-center bg-gradient-success">{{companies.activated|length}}</span>
      </a>
    </li>

    <li class="nav-item">
      <a class="nav-link mb-0 px-0 py-1" role="tab" data-bs-toggle="tab" data-bs-target="#desactivated" aria-controls="desactivated" aria-selected="false">
        <i class="tf-icons bx bx-message-square"></i>
        Entreprises inactives
        <span class="badge rounded-pill badge-center  bg-gradient-danger">{{companies.desactivated|length}}</span>
      </a>
    </li>

  </ul>
  <div class="tab-content">
    <div class="tab-pane fade show active" id="request-rejected" role="tabpanel">
      <div class="table-responsive p-0">
        <table class="table align-items-center mb-0">
          <thead>
            <tr class="bg-gradient-dark text-white text-center">
              <th class="text-uppercase text-white text-xxs font-weight-bolder opacity-7">Entreprise</th>
              <th class="text-uppercase text-white text-xxs font-weight-bolder opacity-7 ps-2">Email & Phone</th>
              <th class="text-uppercase text-white text-xxs font-weight-bolder opacity-7 ps-2">Ville & Pays</th>
              <th class="text-center text-uppercase text-white text-xxs font-weight-bolder opacity-7">Date de demande</th>
              <th class="text-center text-uppercase text-white text-xxs font-weight-bolder opacity-7">Statut</th>
              <th class="text-white opacity-7">Action</th>
            </tr>
          </thead>
          <tbody>
            {% for c in companies.rejected |reverse %}
              <tr>
                <td>
                  <div class="d-flex px-2 py-1">
                    <div>
                      <img src="{{c.image}}" class="avatar avatar-sm me-3" alt="company_image">
                    </div>
                    <div class="d-flex flex-column justify-content-center">
                      <h6 class="mb-0 text-sm">{{c.name}}</h6>
                      <p class="text-xs text-secondary mb-0">{{c.location}}</p>
                    </div>
                  </div>
                </td>
                <td class="align-middle text-center text-sm">
                  <div class="d-flex flex-column justify-content-center">
                    <h6 class="mb-0 text-sm">{{c.email}}</h6>
                    <p class="text-xs text-secondary mb-0">{{c.phone}}</p>
                  </div>
                </td>
                <td class="align-middle text-center text-sm">
                  <span class="badge badge-sm bg-gradient-dark">{{c.city}}, {{c.country}}</span>
                </td>
                <td class="align-middle text-center">
                  <span class="badge badge-sm bg-gradient-dark">{{c.createdAt|format_datetime('full', 'short', locale='fr')}}</span>
                </td>
                <td class="align-middle text-center">
                  {% if c.status == "rejected" %}
                    <span class="badge badge-sm bg-gradient-danger text-white">demande d'adhésion rejetée</span>
                  {% endif %}
                </td>
                <td class="align-middle text-center">
                  <a href="{{path('admin.companies.show', {uuid : c._id})}}" class="btn btn-primary bg-gradient-secondary btn-sm mb-0">Consulter</a>
                </td>
              </tr>
            {% endfor %}
      
            {% if companies.rejected|length == 0 %}
            <tr>
              <td colspan="5">
                    <p class="text-xs text-secondary mb-0 text-center">
                      <strong class="text-dark">Aucune demande d'adhésion rejetée dans cette catégorie !</strong>
                    </p>
              </td>
            </tr>
            {% endif %}
      
          </tbody>
        </table>
      </div>
    </div>
    <div class="tab-pane fade" id="activated" role="tabpanel">
      <div class="table-responsive p-0">
        <table class="table align-items-center mb-0">
          <thead>
            <tr class="bg-gradient-dark text-white text-center">
              <th class="text-uppercase text-white text-xxs font-weight-bolder opacity-7">Entreprise</th>
              <th class="text-uppercase text-white text-xxs font-weight-bolder opacity-7 ps-2">Email & Phone</th>
              <th class="text-uppercase text-white text-xxs font-weight-bolder opacity-7 ps-2">Ville & Pays</th>
              <th class="text-center text-uppercase text-white text-xxs font-weight-bolder opacity-7">Date de demande</th>
              <th class="text-center text-uppercase text-white text-xxs font-weight-bolder opacity-7">Statut</th>
              <th class="text-white opacity-7">Action</th>
            </tr>
          </thead>
          <tbody>
            {% for c in companies.activated | reverse %}
              <tr>
                <td>
                  <div class="d-flex px-2 py-1">
                    <div>
                      <img src="{{c.image}}" class="avatar avatar-sm me-3" alt="company_image">
                    </div>
                    <div class="d-flex flex-column justify-content-center">
                      <h6 class="mb-0 text-sm">{{c.name}}</h6>
                      <p class="text-xs text-secondary mb-0">{{c.location}}</p>
                    </div>
                  </div>
                </td>
                <td class="align-middle text-center text-sm">
                  <div class="d-flex flex-column justify-content-center">
                    <h6 class="mb-0 text-sm">{{c.email}}</h6>
                    <p class="text-xs text-secondary mb-0">{{c.phone}}</p>
                  </div>
                </td>
                <td class="align-middle text-center text-sm">
                  <span class="badge badge-sm bg-gradient-dark">{{c.city}}, {{c.country}}</span>
                </td>
                <td class="align-middle text-center">
                  <span class="badge badge-sm bg-gradient-dark">{{c.createdAt|format_datetime('full', 'short', locale='fr')}}</span>
                </td>
                <td class="align-middle text-center">
                  {% if c.status == "accepted" %}
                    <span class="badge badge-sm bg-gradient-success text-dark">Entreprise acceptée et visible</span>
                  {% endif %}
                </td>
                <td class="align-middle text-center">
                  <a href="{{path('admin.companies.show', {uuid : c._id})}}" class="btn btn-primary bg-gradient-secondary btn-sm mb-0">Consulter</a>
                </td>
              </tr>
            {% endfor %}
      
            {% if companies.activated|length == 0 %}
            <tr>
              <td colspan="5">
                    <p class="text-xs text-secondary mb-0 text-center">
                      <strong class="text-dark">Aucune entreprise active dans cette categorie !</strong>
                    </p>
              </td>
            </tr>
            {% endif %}
      
          </tbody>
        </table>
      </div>
    </div>
    <div class="tab-pane fade" id="desactivated" role="tabpanel">
      <div class="table-responsive p-0">
        <table class="table align-items-center mb-0">
          <thead>
            <tr class="bg-gradient-dark text-white text-center">
              <th class="text-uppercase text-white text-xxs font-weight-bolder opacity-7">Entreprise</th>
              <th class="text-uppercase text-white text-xxs font-weight-bolder opacity-7 ps-2">Email & Phone</th>
              <th class="text-uppercase text-white text-xxs font-weight-bolder opacity-7 ps-2">Ville & Pays</th>
              <th class="text-center text-uppercase text-white text-xxs font-weight-bolder opacity-7">Date de demande</th>
              <th class="text-center text-uppercase text-white text-xxs font-weight-bolder opacity-7">Statut</th>
              <th class="text-white opacity-7">Action</th>
            </tr>
          </thead>
          <tbody>
            {% for c in companies.desactivated |reverse %}
              <tr>
                <td>
                  <div class="d-flex px-2 py-1">
                    <div>
                      <img src="{{c.image}}" class="avatar avatar-sm me-3" alt="company_image">
                    </div>
                    <div class="d-flex flex-column justify-content-center">
                      <h6 class="mb-0 text-sm">{{c.name}}</h6>
                      <p class="text-xs text-secondary mb-0">{{c.location}}</p>
                    </div>
                  </div>
                </td>
                <td class="align-middle text-center text-sm">
                  <div class="d-flex flex-column justify-content-center">
                    <h6 class="mb-0 text-sm">{{c.email}}</h6>
                    <p class="text-xs text-secondary mb-0">{{c.phone}}</p>
                  </div>
                </td>
                <td class="align-middle text-center text-sm">
                  <span class="badge badge-sm bg-gradient-dark">{{c.city}}, {{c.country}}</span>
                </td>
                <td class="align-middle text-center">
                  <span class="badge badge-sm bg-gradient-dark">{{c.createdAt|format_datetime('full', 'short', locale='fr')}}</span>
                </td>
                <td class="align-middle text-center">
                  {% if c.status == "desactivated" %}
                    <span class="badge badge-sm bg-gradient-success text-dark">Entreprise desactivée et indisponible</span>
                  {% endif %}
                </td>
                <td class="align-middle text-center">
                  <a href="{{path('admin.companies.show', {uuid : c._id})}}" class="btn btn-primary bg-gradient-secondary btn-sm mb-0">Consulter</a>
                </td>
              </tr>
            {% endfor %}
      
            {% if companies.desactivated|length == 0 %}
            <tr>
              <td colspan="5">
                    <p class="text-xs text-secondary mb-0 text-center">
                      <strong class="text-dark">Aucune entreprise inactive dans cette categorie !</strong>
                    </p>
              </td>
            </tr>
            {% endif %}
      
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
{% else %}
<div class="table-responsive p-0">
  <table class="table align-items-center mb-0">
    <thead>
      <tr class="bg-gradient-dark text-white text-center">
        <th class="text-uppercase text-white text-xxs font-weight-bolder opacity-7">Entreprise</th>
        <th class="text-uppercase text-white text-xxs font-weight-bolder opacity-7 ps-2">Email & Phone</th>
        <th class="text-uppercase text-white text-xxs font-weight-bolder opacity-7 ps-2">Ville & Pays</th>
        <th class="text-center text-uppercase text-white text-xxs font-weight-bolder opacity-7">Date de demande</th>
        <th class="text-center text-uppercase text-white text-xxs font-weight-bolder opacity-7">Statut</th>
        <th class="text-white opacity-7">Action</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td colspan="5">
              <p class="text-xs text-secondary mb-0 text-center">
                <strong class="text-dark">Aucune entreprise dans cette categorie !</strong>
              </p>
        </td>
      </tr>
    </tbody>
  </table>
</div>
{% endif %}



